<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Moose::Cookbook::Snack::Types Moose(0.79) - Japan Perl Association ドキュメント和訳プロジェクト</title>
<link rel="stylesheet" type="text/css" href="http://lazy-css.org/css/style.css" />
</head>
<body>
<h1>Moose::Cookbook::Snack::Types</h1>
<div class="path" id="path"><a href="/">HOME</a> &gt; <a href="/Moose/Cookbook/Snack/Types.html">Moose::Cookbook::Snack::Types</a></div><div class="pod">
<!-- INDEX START -->

<ul class="list-index"><li><a href="#">題名</a></li>
<li><a href="#-2">概要</a></li>
<li><a href="#-3">本文</a></li>
<li><a href="#-4">参照</a></li>
<li><a href="#-5">作者</a></li>
<li><a href="#COPYRIGHT_AND_LICENSE">COPYRIGHT AND LICENSE</a>
</li>
</ul><!-- INDEX END -->

<h2 id="">題名</h2>
<div id="CONTENT">
<p>Moose::Cookbook::Snack::Types - 型や型制約を利用するときのサンプルコード</p>

</div>
<h2 id="-2">概要</h2>
<div id="CONTENT-2">
<pre>  package Point;
  use Moose;

  has 'x' =&gt; ( isa =&gt; 'Int', is =&gt; 'ro' );
  has 'y' =&gt; ( isa =&gt; 'Int', is =&gt; 'rw' );

  package main;

  my $point = eval { Point-&gt;new( x =&gt; 'fifty', y =&gt; 'forty' ); };

  if ($@) {
      print &quot;Oops: $@&quot;;
  }

  my $point;
  my $xval             = 'forty-two';
  my $xattribute       = Point-&gt;meta-&gt;find_attribute_by_name('x');
  my $xtype_constraint = $xattribute-&gt;type_constraint;

  if ( $xtype_constraint-&gt;check($xval) ) {
      $point = Point-&gt;new( x =&gt; $xval, y =&gt; 0 );
  }
  else {
      print &quot;Value: $xval is not an &quot; . $xtype_constraint-&gt;name . &quot;\n&quot;;
  }

</pre>

</div>
<h2 id="-3">本文</h2>
<div id="CONTENT-3">
<p>これは<cite>Moose::Cookbook::Basics::Recipe1</cite>で利用したPointの例に型チェックを追加したものです。</p>
<p><code>Int</code>なアトリビュートに文字列の値を割り当てようとすると、Mooseは明示的にエラーメッセージを出して死にます。エラーメッセージにはアトリビュート名と型制約名、制約チェックに失敗した値が含まれています。</p>
<p>ここでは<code>eval</code>を使ってエラーメッセージを<code>$@</code>に取り込んでいます。</p>
<p>後半では、<cite>Moose::Meta::Attribute</cite>から<cite>Moose::Meta::TypeConstraint</cite>オブジェクトを取得して、<cite>Moose::Meta::TypeConstraint</cite>を利用して直接値のチェックを行っています。</p>

</div>
<h2 id="-4">参照</h2>
<div id="CONTENT-4">
<dl>
	<dt><cite>Moose::Cookbook::Basics::Recipe1</cite></dt>
	<dt><cite>Moose::Utils::TypeConstraints</cite></dt>
	<dt><cite>Moose::Meta::Attribute</cite></dt>
</dl>

</div>
<h2 id="-5">作者</h2>
<div id="CONTENT-5">
<p>Jess Robinson &lt;cpan@desert-island.me.uk&gt;</p>

</div>
<h2 id="COPYRIGHT_AND_LICENSE">COPYRIGHT AND LICENSE</h2>
<div id="COPYRIGHT_AND_LICENSE_CONTENT">
<p>Copyright 2006-2009 by Infinity Interactive, Inc.</p>
<p><a href="http://www.iinteractive.com">http://www.iinteractive.com</a></p>
<p>This library is free software; you can redistribute it and/or modify
it under the same terms as Perl itself.</p>

</div>
</div>
<div class="head">
	<div class="logo">
	<img src="http://lazy-css.org/css/img/logo.png">
	</div>
	<ul class="global-navi">

	<li><img src="http://lazy-css.org/css/img/g_home.png" alt="ホーム"></li>
	<li><img src="http://lazy-css.org/css/img/g_news.png" alt="ニュース"></li>
	<li><img src="http://lazy-css.org/css/img/g_blog.png" alt="ブログ"></li>
	</ul>
</div>
<ul class="sub-navi">
<li><img src="http://lazy-css.org/css/img/inq.png" alt="お問い合わせ"></li>
</ul>

<div class="footer">
<ul class="footer-navi">
	<li>リンク</li>
	<li>リンク</li>
	<li>リンク</li>
	<li>リンク</li>
</ul>
<address>&copy; copyright 2009 jpa all right reserved.</address>
</div>
</body>
</html>

